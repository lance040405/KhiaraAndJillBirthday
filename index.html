<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Khiara and Jill's Birthday Samgyupsal</title>
  <style>
    body {
      margin: 0;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #1a1a2e, #16213e);
      color: white;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      padding: 20px;
    }

    h1 {
      text-align: center;
      margin-bottom: 20px;
      font-size: 2.5rem;
      color: #ffcc70;
      text-shadow: 0 0 10px rgba(255, 204, 112, 0.7);
    }

    .main-container {
      display: flex;
      flex-direction: column;
      gap: 20px;
      width: 100%;
      max-width: 1000px;
    }

    .top-section {
      display: flex;
      flex-direction: row;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .countdown {
      position: relative;
      padding: 20px;
      border-radius: 20px;
      background: #0f3460;
      text-align: center;
      font-size: 2rem;
      color: #ffcc70;
      flex: 1 1 300px;
      max-width: 400px;
      overflow: hidden;
    }

    .glow-border {
      position: absolute;
      inset: 0;
      border-radius: 20px;
      padding: 2px;
      background: conic-gradient(#ffcc70, #f72585, #7209b7, #3a0ca3, #ffcc70);
      -webkit-mask: linear-gradient(#000 0 0) content-box, linear-gradient(#000 0 0);
      -webkit-mask-composite: xor;
              mask-composite: exclude;
      animation: rotate 6s linear infinite;
    }

    @keyframes rotate {
      from { transform: rotate(0deg); }
      to { transform: rotate(360deg); }
    }

    #timer {
      position: relative;
      z-index: 1;
    }

    .form-container {
      background: #0f3460;
      padding: 20px;
      border-radius: 20px;
      flex: 1 1 300px;
      max-width: 400px;
    }

    form {
      display: flex;
      flex-direction: column;
      gap: 10px;
    }

    input[type="text"] {
      padding: 10px;
      border-radius: 10px;
      border: none;
      outline: none;
    }

    .options {
      display: flex;
      justify-content: space-around;
      margin: 10px 0;
    }

    button {
      padding: 10px;
      border: none;
      border-radius: 10px;
      background: #ffcc70;
      color: #16213e;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s;
    }

    button:hover {
      background: #f72585;
      color: white;
    }

    .rsvp-lists {
      display: flex;
      gap: 20px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .list {
      background: #0f3460;
      padding: 15px;
      border-radius: 15px;
      flex: 1 1 300px;
      max-width: 400px;
    }

    .list h3 {
      margin-top: 0;
      color: #ffcc70;
    }

    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    ul li {
      padding: 5px 0;
      border-bottom: 1px solid rgba(255,255,255,0.1);
    }

    /* Mobile Adjustments */
    @media (max-width: 768px) {
      h1 {
        font-size: 1.8rem;
      }

      .top-section {
        flex-direction: row;
        gap: 15px;
      }

      .countdown, .form-container {
        flex: 1 1 100%;
        max-width: 100%;
        font-size: 1.2rem;
      }

      .rsvp-lists {
        flex-direction: row;
      }

      .list {
        flex: 1 1 45%;
        min-width: 200px;
      }
    }
  </style>
</head>
<body>
  <h1>Khiara and Jill's Birthday Samgyupsal</h1>

  <div class="main-container">
    <div class="top-section">
      <div class="countdown" id="countdown">
        <div class="glow-border"></div>
        <div id="timer"></div>
      </div>

      <div class="form-container">
        <form id="rsvpForm">
          <label for="name">Name:</label>
          <input type="text" id="name" required />
          <div class="options">
            <label><input type="radio" name="status" value="going" required /> Going</label>
            <label><input type="radio" name="status" value="notGoing" /> Not Going</label>
          </div>
          <button type="submit">Submit</button>
        </form>
      </div>
    </div>

    <div class="rsvp-lists">
      <div class="list">
        <h3>‚úÖ Going</h3>
        <ul id="goingList"></ul>
      </div>
      <div class="list">
        <h3>‚ùå Not Going</h3>
        <ul id="notGoingList"></ul>
      </div>
    </div>
  </div>

  <canvas id="confettiCanvas" style="position:fixed; top:0; left:0; width:100%; height:100%; pointer-events:none; z-index:999;"></canvas>

  <script>
    // Countdown
    const eventDate = new Date("2025-09-15T18:00:00").getTime();
    const timerEl = document.getElementById("timer");

    const countdown = setInterval(() => {
      const now = new Date().getTime();
      const distance = eventDate - now;

      if (distance < 0) {
        clearInterval(countdown);
        timerEl.innerHTML = "üéâ It's Party Time! üéâ";
        launchConfetti();
        return;
      }

      const days = Math.floor(distance / (1000 * 60 * 60 * 24));
      const hours = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
      const minutes = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60));
      const seconds = Math.floor((distance % (1000 * 60)) / 1000);

      timerEl.innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
    }, 1000);

    // RSVP Storage
    const form = document.getElementById("rsvpForm");
    const goingList = document.getElementById("goingList");
    const notGoingList = document.getElementById("notGoingList");

    function loadRSVPs() {
      const data = JSON.parse(localStorage.getItem("rsvps")) || { going: [], notGoing: [] };
      goingList.innerHTML = "";
      notGoingList.innerHTML = "";
      data.going.forEach(name => {
        const li = document.createElement("li");
        li.textContent = name;
        goingList.appendChild(li);
      });
      data.notGoing.forEach(name => {
        const li = document.createElement("li");
        li.textContent = name;
        notGoingList.appendChild(li);
      });
    }

    form.addEventListener("submit", (e) => {
      e.preventDefault();
      const name = document.getElementById("name").value.trim();
      const status = document.querySelector("input[name='status']:checked").value;
      if (!name) return;

      const data = JSON.parse(localStorage.getItem("rsvps")) || { going: [], notGoing: [] };
      if (status === "going") {
        if (!data.going.includes(name)) data.going.push(name);
      } else {
        if (!data.notGoing.includes(name)) data.notGoing.push(name);
      }
      localStorage.setItem("rsvps", JSON.stringify(data));
      loadRSVPs();
      form.reset();
    });

    loadRSVPs();

    // Confetti
    function launchConfetti() {
      const duration = 5 * 1000; // 5 seconds
      const animationEnd = Date.now() + duration;
      const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 999 };

      function randomInRange(min, max) {
        return Math.random() * (max - min) + min;
      }

      const interval = setInterval(function() {
        const timeLeft = animationEnd - Date.now();

        if (timeLeft <= 0) {
          return clearInterval(interval);
        }

        const particleCount = 50 * (timeLeft / duration);
        confetti(Object.assign({}, defaults, {
          particleCount,
          origin: { x: randomInRange(0, 1), y: Math.random() - 0.2 }
        }));
      }, 250);
    }

    // Confetti Library
    (function() {
      var confetti = window.confetti = function(opts) {
        var count = opts.particleCount || 50;
        var defaults = {
          origin: { x: 0.5, y: 0.5 },
          spread: 360,
          startVelocity: 30,
          ticks: 60
        };
        for (var i = 0; i < count; i++) {
          // Just a placeholder minimal confetti effect
          const div = document.createElement("div");
          div.style.position = "fixed";
          div.style.top = (Math.random() * window.innerHeight) + "px";
          div.style.left = (Math.random() * window.innerWidth) + "px";
          div.style.width = "6px";
          div.style.height = "6px";
          div.style.background = ["#ffcc70", "#f72585", "#7209b7", "#3a0ca3"][Math.floor(Math.random() * 4)];
          div.style.opacity = "0.9";
          div.style.borderRadius = "50%";
          document.body.appendChild(div);
          setTimeout(() => div.remove(), 1500);
        }
      };
    })();
  </script>
</body>
</html>
